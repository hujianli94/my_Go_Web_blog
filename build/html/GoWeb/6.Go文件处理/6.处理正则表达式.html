<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6.6. 处理正则表达式 &mdash; 小健Go Web开发实战学习</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7. Go并发编程" href="../7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/index.html" />
    <link rel="prev" title="6.5. 处理日志记录" href="5.%E5%A4%84%E7%90%86%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> 小健_Go_Web开发实战学习
            <img src="../../_static/goweb.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Go Web开发实战学习</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../1.Go%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/index.html">1. Go基础入门</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2.Go-Web%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/index.html">2. Go-Web开发基础</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3.%E6%8E%A5%E6%94%B6%E5%92%8C%E5%A4%84%E7%90%86Go-Web%E8%AF%B7%E6%B1%82/index.html">3. 接收和处理Go-Web请求</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4.%E4%BD%BF%E7%94%A8Go%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93/index.html">4. 使用Go访问数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5.Go%E9%AB%98%E7%BA%A7%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/index.html">5. Go高级网络编程</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">6. Go文件处理</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="1.%E5%A4%84%E7%90%86%E7%9B%AE%E5%BD%95%E4%B8%8E%E6%96%87%E4%BB%B6.html">6.1. 处理目录与文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="2.%E5%A4%84%E7%90%86XML%E6%96%87%E4%BB%B6.html">6.2. 处理XML文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="3.%E5%A4%84%E7%90%86JSON%E6%96%87%E4%BB%B6.html">6.3. 处理JSON文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.%E5%A4%84%E7%90%86CSV%E6%96%87%E4%BB%B6.html">6.4. 处理CSV文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="5.%E5%A4%84%E7%90%86%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95.html">6.5. 处理日志记录</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">6.6. 处理正则表达式</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">6.6.1. 1.正则表达式简介</a></li>
<li class="toctree-l4"><a class="reference internal" href="#go">6.6.2. 2.使用Go正则表达式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">6.6.3. 3. regexp包的应用示例</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">6.6.4. 4. 根据正则表达式生产代码</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/index.html">7. Go并发编程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../8.Go-RESTful-API%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91/index.html">8. Go-RESTful-API接口开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../9.%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAB2C%E7%94%B5%E5%AD%90%E5%95%86%E5%8A%A1%E7%B3%BB%E7%BB%9F/index.html">9. 开发一个B2C电子商务系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../10.%E4%BD%BF%E7%94%A8Docker%E9%83%A8%E7%BD%B2GO_Web%E5%BA%94%E7%94%A8/index.html">10. 使用Docker部署GO_Web应用</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">小健_Go_Web开发实战学习</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Go Web开发实战学习</a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">6. </span>Go文件处理</a> &raquo;</li>
      <li><span class="section-number">6.6. </span>处理正则表达式</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/GoWeb/6.Go文件处理/6.处理正则表达式.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#id1" id="id12">处理正则表达式</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id13">1.正则表达式简介</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id14">1.1 普通字符</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id15">1.2 特殊字符</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id16">1.3 限定符</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id17">1.4 定位符</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#go" id="id18">2.使用Go正则表达式</a></p>
<ul>
<li><p><a class="reference internal" href="#regexp" id="id19">2.1 regexp包的常用函数</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id10" id="id20">3. regexp包的应用示例</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id21">4. 根据正则表达式生产代码</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="id1">
<h1><a class="toc-backref" href="#id12"><span class="section-number">6.6. </span>处理正则表达式</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<section id="id2">
<h2><a class="toc-backref" href="#id13"><span class="section-number">6.6.1. </span>1.正则表达式简介</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>正则表达式特点：</p>
<ol class="arabic simple">
<li><p>灵活性、逻辑性和功能性非常强。</p></li>
<li><p>简单方式实现字符串的复杂控制。</p></li>
<li><p>晦涩难懂。</p></li>
</ol>
<p>正则表达式提高文本处理能力，用于表单输入验证、文本提取、数据分析等。</p>
<p>正则表达式由普通字符（<code class="docutils literal notranslate"><span class="pre">a~z</span></code>、<code class="docutils literal notranslate"><span class="pre">A~Z</span></code>、<code class="docutils literal notranslate"><span class="pre">0~9</span></code>等）和特殊字符（元字符）组成。</p>
<section id="id3">
<h3><a class="toc-backref" href="#id14">1.1 普通字符</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>普通字符包括大小写字母、数字、标点符号和其他符号。普通字符包括可打印字符和非打印字符（计算机中存在但不能够显示或打印的字符）。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>非打印字符</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>
换页符，等价于:raw-
latex:<cite>x`0c和:raw-latex:</cite>cL`。</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>换行符，等价于:raw-
latex:<cite>x`0a和:raw-latex:</cite>cJ`。</p></td>
</tr>
<tr class="row-even"><td><p>
回车符，等价于:raw-
latex:<cite>x`0d和:raw-latex:</cite>cM`。</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>任意空白字符（空格、制
表符、换页符等），等价于[:raw-la
tex:<cite>rn</cite>。</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>任意非空白字符（空格、制表符、换
页符等），等价于[^rnrtv]。</p></td>
</tr>
<tr class="row-odd"><td><p>
制表符，等价于:raw-
latex:<cite>x`09和:raw-latex:</cite>cl`。</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>
垂直制表符，等价于:raw-
latex:<cite>x`0b和:raw-latex:</cite>cK`。</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id15">1.2 特殊字符</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>特殊含义的字符。匹配特殊字符，必须转义()。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>特殊字符</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>$</p></td>
<td><p>字符串结尾，若设置RegExp的Mult
iline属性，$也匹配“”或”。</p></td>
</tr>
<tr class="row-odd"><td><p>()</p></td>
<td><p>子表达式的开始和结束。</p></td>
</tr>
<tr class="row-even"><td><p>*</p></td>
<td><p>零或多。</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>一或多。</p></td>
</tr>
<tr class="row-even"><td><p>.</p></td>
<td><p>除“”外任意单字符。</p></td>
</tr>
<tr class="row-odd"><td><p>[</p></td>
<td><p>标记中括号表达式的开始。</p></td>
</tr>
<tr class="row-even"><td><p>?</p></td>
<td><p>零或一，或指明非贪婪限定符。</p></td>
</tr>
<tr class="row-odd"><td><p>\</p></td>
<td><p>将下一
个字符标记为特殊字符、原义字符、向后引用、八进制转义符。</p></td>
</tr>
<tr class="row-even"><td><p>^</p></td>
<td><p>字符串开始，方括号表达式中使用表示取反。</p></td>
</tr>
<tr class="row-odd"><td><p>{</p></td>
<td><p>标记限定符表达式的开始。</p></td>
</tr>
<tr class="row-even"><td><p>|</p></td>
<td><p>选择。</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id16">1.3 限定符</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>限定给定组件必须出现多少次。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>限定符</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>*</p></td>
<td><p>零或多，等价于{0,}。</p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>一或多，等价于{1,}。</p></td>
</tr>
<tr class="row-even"><td><p>?</p></td>
<td><p>零或一，等价于{0,1}。</p></td>
</tr>
<tr class="row-odd"><td><p>{n}</p></td>
<td><p>n。</p></td>
</tr>
<tr class="row-even"><td><p>{n,}</p></td>
<td><p>大于等于n。</p></td>
</tr>
<tr class="row-odd"><td><p>{n,m}</p></td>
<td><p>大于等于n，小于等于m。</p></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Chapter</span> <span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">*</span>
</pre></div>
</div>
<p>*、+、?默认贪婪，后面加?实现非贪婪或最小匹配。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;.*&gt;        // 贪婪匹配
&lt;.*?&gt;       // 非贪婪匹配
</pre></div>
</div>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id17">1.4 定位符</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>定位符</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>^</p></td>
<td><p>字符串开始，若设置RegE
xp的Multiline属性，^也匹配“:raw-
latex:<cite>n</cite>”或”。</p></td>
</tr>
<tr class="row-odd"><td><p>$</p></td>
<td><p>字符串结尾，若设置RegE
xp的Multiline属性，$也匹配“:raw-
latex:<cite>n</cite>”或”。</p></td>
</tr>
<tr class="row-even"><td><p>
字边界，即字与空格间的位置。</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>非字边界。</p></td>
</tr>
</tbody>
</table>
<p>…….. 其他一些省略</p>
<p>（5）选择 （6）反向引用 （7）运算符优先级</p>
</section>
</section>
<section id="go">
<h2><a class="toc-backref" href="#id18"><span class="section-number">6.6.2. </span>2.使用Go正则表达式</a><a class="headerlink" href="#go" title="Permalink to this headline">¶</a></h2>
<p>参考标准库文档：</p>
<p><a class="reference external" href="https://studygolang.com/pkgdoc">https://studygolang.com/pkgdoc</a></p>
<p><a class="reference external" href="https://zhuanlan.zhihu.com/p/396375666">https://zhuanlan.zhihu.com/p/396375666</a></p>
<section id="regexp">
<h3><a class="toc-backref" href="#id19">2.1 regexp包的常用函数</a><a class="headerlink" href="#regexp" title="Permalink to this headline">¶</a></h3>
<section id="id7">
<h4>1.获取正则对象<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="nx">Compile</span><span class="p">(</span><span class="nx">expr</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Regexp</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
<span class="kd">func</span> <span class="nx">MustCompile</span><span class="p">(</span><span class="nx">str</span> <span class="kt">string</span><span class="p">)</span> <span class="o">*</span><span class="nx">Regexp</span>
</pre></div>
</div>
<p>MustCompile()函数失败会宕机。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>reg, err := regexp.Compile(`\d+`)
reg := regexp.MustCompile(`\d+`)
</pre></div>
</div>
</section>
<section id="id8">
<h4>2.匹配检测<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">re</span> <span class="o">*</span><span class="nx">Regexp</span><span class="p">)</span> <span class="nx">MatchString</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">re</span> <span class="o">*</span><span class="nx">Regexp</span><span class="p">)</span> <span class="nx">Match</span><span class="p">(</span><span class="nx">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="kt">bool</span>
</pre></div>
</div>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&quot;fmt&quot;</span>
    <span class="s">&quot;regexp&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">text</span> <span class="o">:=</span> <span class="s">&quot;Hello Gopher, Hello Go Web&quot;</span>
    <span class="nx">reg</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">MustCompile</span><span class="p">(</span><span class="s">`\w+`</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">reg</span><span class="p">.</span><span class="nx">MatchString</span><span class="p">(</span><span class="nx">text</span><span class="p">))</span> <span class="c1">//true</span>

    <span class="nx">match</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">MatchString</span><span class="p">(</span><span class="s">&quot;H(.*)d!&quot;</span><span class="p">,</span> <span class="s">&quot;Hello World!&quot;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="c1">//true</span>

    <span class="nx">match</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">Match</span><span class="p">(</span><span class="s">&quot;H(.*)d!&quot;</span><span class="p">,</span> <span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">))</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="c1">//true</span>

    <span class="nx">r</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">Compile</span><span class="p">(</span><span class="s">&quot;H(.*)d!&quot;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">MatchString</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">))</span> <span class="c1">//true</span>

<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id9">
<h4>3.查找<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">re</span> <span class="o">*</span><span class="nx">Regexp</span><span class="p">)</span> <span class="nx">FindString</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span>       <span class="c1">//返回左侧第一个匹配结果。</span>
</pre></div>
</div>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">re</span> <span class="o">*</span><span class="nx">Regexp</span><span class="p">)</span> <span class="nx">FindAllString</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="p">[]</span><span class="kt">string</span>   <span class="c1">//n限定查找数量，-1不限制。</span>
</pre></div>
</div>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&quot;fmt&quot;</span>
    <span class="s">&quot;regexp&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">text</span> <span class="o">:=</span> <span class="s">&quot;Hello Gopher, Hello Go Web&quot;</span>
    <span class="nx">reg</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">MustCompile</span><span class="p">(</span><span class="s">`\w+`</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">reg</span><span class="p">.</span><span class="nx">FindAllString</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>

<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kd">func</span> <span class="p">(</span><span class="nx">re</span> <span class="o">*</span><span class="nx">Regexp</span><span class="p">)</span> <span class="nx">FindAll</span><span class="p">(</span><span class="nx">b</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="p">[][]</span><span class="kt">byte</span>
</pre></div>
</div>
<p>……</p>
<p>（4）查找匹配位置 （5）替换 （6）分割</p>
</section>
</section>
</section>
<section id="id10">
<h2><a class="toc-backref" href="#id20"><span class="section-number">6.6.3. </span>3. regexp包的应用示例</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">phone.go</span></code></p>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&quot;fmt&quot;</span>
    <span class="s">&quot;regexp&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">res2</span> <span class="o">:=</span> <span class="nx">findPhoneNumber</span><span class="p">(</span><span class="s">&quot;13688888888&quot;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">res2</span><span class="p">)</span> <span class="c1">// true</span>

    <span class="nx">res2</span> <span class="p">=</span> <span class="nx">findPhoneNumber</span><span class="p">(</span><span class="s">&quot;02888888888&quot;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">res2</span><span class="p">)</span> <span class="c1">// false</span>

    <span class="nx">res2</span> <span class="p">=</span> <span class="nx">findPhoneNumber</span><span class="p">(</span><span class="s">&quot;123456789&quot;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">res2</span><span class="p">)</span> <span class="c1">// false</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">findPhoneNumber</span><span class="p">(</span><span class="nx">str</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
    <span class="c1">// 创建一个正则表达式匹配规则对象</span>
    <span class="nx">reg</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">MustCompile</span><span class="p">(</span><span class="s">&quot;^1[1-9]{10}&quot;</span><span class="p">)</span>
    <span class="c1">// 利用正则表达式匹配规则对象匹配指定字符串</span>
    <span class="nx">res</span> <span class="o">:=</span> <span class="nx">reg</span><span class="p">.</span><span class="nx">FindAllString</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">res</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">email.go</span></code></p>
<div class="highlight-go notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&quot;fmt&quot;</span>
    <span class="s">&quot;regexp&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">res</span> <span class="o">:=</span> <span class="nx">findEmail</span><span class="p">(</span><span class="s">&quot;8888@qq.com&quot;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="c1">// true</span>

    <span class="nx">res</span> <span class="p">=</span> <span class="nx">findEmail</span><span class="p">(</span><span class="s">&quot;shir?don@qq.com&quot;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="c1">// false</span>

    <span class="nx">res</span> <span class="p">=</span> <span class="nx">findEmail</span><span class="p">(</span><span class="s">&quot;8888@qqcom&quot;</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="c1">// false</span>
<span class="p">}</span>
<span class="kd">func</span> <span class="nx">findEmail</span><span class="p">(</span><span class="nx">str</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
    <span class="nx">reg</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">MustCompile</span><span class="p">(</span><span class="s">&quot;^[a-zA-Z0-9_]+@[a-zA-Z0-9]+\\.[a-zA-Z0-9]+&quot;</span><span class="p">)</span>
    <span class="nx">res</span> <span class="o">:=</span> <span class="nx">reg</span><span class="p">.</span><span class="nx">FindAllString</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">res</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id11">
<h2><a class="toc-backref" href="#id21"><span class="section-number">6.6.4. </span>4. 根据正则表达式生产代码</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>在线版</p>
<p><a class="reference external" href="https://regex101.com/">https://regex101.com/</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="5.%E5%A4%84%E7%90%86%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95.html" class="btn btn-neutral float-left" title="6.5. 处理日志记录" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../7.Go%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/index.html" class="btn btn-neutral float-right" title="7. Go并发编程" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, huxiaojian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>